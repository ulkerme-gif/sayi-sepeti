<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sayƒ± Sepeti Oyunu</title>
<style>
  body { margin:0; overflow:hidden; font-family:sans-serif; }
  canvas { display:block; margin:auto; margin-top:20px; border:3px solid #ff9800; }
  #bilgi { text-align:center; font-size:18px; color:#333; }
  #yapan { font-size:16px; color:#555; margin-top:-10px; margin-bottom:10px; }
</style>
</head>
<body>

<div id="bilgi">
  <h2>üéØ Sayƒ± Sepeti Oyunu</h2>
  <div id="yapan">Yapan: <strong>Mete √úLKER</strong></div>
  <p>A≈üama: <span id="asama">1</span> | ‚ù§Ô∏è <span id="kalp">3</span> | Puan: <span id="puan">0</span></p>
</div>

<canvas id="oyun" width="400" height="500"></canvas>

<script>
const canvas = document.getElementById("oyun");
const ctx = canvas.getContext("2d");

let sepet = {x:180, y:420, w:60, h:30};
let sayi = {x:200, y:-20, deger:0};
let puan=0, kalp=3, asama=1;
let hiz=2;
let oyunAktif=false;
let baslamaEkrani=true;
let asamaBasladi=false;

// Arka plan ve toprak
const arkaPlanRenk="#87CEEB";
const toprakRenk="#8B4513";
const toprakY=450;

// Rastgele sayƒ± √ºret
function yeniSayi() {
  if(asama===1) sayi.deger=Math.floor(Math.random()*10);
  else if(asama===2) sayi.deger=Math.floor(Math.random()*21)-10;
  else sayi.deger=(Math.random()*4-2).toFixed(1);
  sayi.x=Math.random()*350;
  sayi.y=-20;
}

// √áizim fonksiyonu
function ciz() {
  ctx.fillStyle=arkaPlanRenk;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle=toprakRenk;
  ctx.fillRect(0,toprakY,canvas.width,canvas.height-toprakY);

  // Ba≈ülangƒ±√ß veya a≈üama ekranƒ±
  if(baslamaEkrani){
    ctx.fillStyle="black";
    ctx.font="25px Arial";
    ctx.textAlign="center";
    if(!asamaBasladi) ctx.fillText("Ba≈ülamak i√ßin tƒ±klayƒ±n", canvas.width/2, canvas.height/2);
    else {
      let asamaYazi = asama===1 ? "Doƒüal Sayƒ±lar" : asama===2 ? "Tam Sayƒ±lar" : "Rasyonel Sayƒ±lar";
      ctx.fillText("A≈üama "+asama+": "+asamaYazi, canvas.width/2, canvas.height/2-20);
      ctx.fillText("Ba≈ülamak i√ßin dokun", canvas.width/2, canvas.height/2+20);
    }
    return;
  }

  // Sepet
  ctx.fillStyle="#FF8C00";
  ctx.fillRect(sepet.x,sepet.y,sepet.w,sepet.h);
  // Tente
  ctx.fillStyle="#FFB74D";
  ctx.fillRect(sepet.x-5,sepet.y-15,sepet.w+10,10);

  // Sayƒ±
  ctx.fillStyle="#1565c0";
  ctx.font="30px Arial";
  ctx.fillText(sayi.deger,sayi.x,sayi.y);

  // Kalpler ve puan canvas √ºzerinde de g√∂r√ºn√ºr
  ctx.fillStyle="red";
  ctx.font="20px Arial";
  ctx.fillText("‚ù§Ô∏è ".repeat(kalp), 10, 30);
  ctx.fillStyle="black";
  ctx.fillText("Puan: "+puan, 300, 30);

  if(kalp<=0){
    ctx.fillStyle="red";
    ctx.font="30px Arial";
    ctx.fillText("Oyun Bitti!",canvas.width/2,canvas.height/2);
    oyunAktif=false;
    baslamaEkrani=true;
    asamaBasladi=false;
  }
}

// G√ºncelleme
function guncelle() {
  if(!oyunAktif) return;
  sayi.y+=hiz;

  if(sayi.y>sepet.y-20 && sayi.x>sepet.x-10 && sayi.x<sepet.x+sepet.w+10){
    let dogru=false;
    if(asama===1 && sayi.deger>=0 && Number.isInteger(Number(sayi.deger))) dogru=true;
    if(asama===2 && Number.isInteger(Number(sayi.deger))) dogru=true;
    if(asama===3) dogru=true;

    if(dogru) puan+=10; else kalp--;

    document.getElementById("puan").innerText=puan;
    document.getElementById("kalp").innerText=kalp;

    if(kalp<=0) { oyunAktif=false; baslamaEkrani=true; asamaBasladi=false; }

    if(puan>=200){
      asama++;
      if(asama>3){ oyunAktif=false; baslamaEkrani=true; asamaBasladi=false; }
      else{
        puan=0; kalp=3; hiz+=1;
        document.getElementById("asama").innerText=asama;
        baslamaEkrani=true; // a≈üama ekranƒ±
        asamaBasladi=false;
      }
    }
    yeniSayi();
  }

  if(sayi.y>500) yeniSayi();
}

// Oyun d√∂ng√ºs√º
function dongu(){ guncelle(); ciz(); requestAnimationFrame(dongu); }
dongu();

// Klavye kontrolleri
window.addEventListener("keydown",(e)=>{
  if(!oyunAktif) return;
  if(e.key==="ArrowLeft") sepet.x-=20;
  if(e.key==="ArrowRight") sepet.x+=20;
  if(sepet.x<0) sepet.x=0;
  if(sepet.x>340) sepet.x=340;
});

// Dokunmatik kontroller
let baslamaX=null;
canvas.addEventListener("touchstart",(e)=>{
  if(!oyunAktif) return;
  baslamaX=e.touches[0].clientX;
});
canvas.addEventListener("touchmove",(e)=>{
  if(!oyunAktif) return;
  let hareket=e.touches[0].clientX-baslamaX;
  sepet.x+=hareket;
  if(sepet.x<0) sepet.x=0;
  if(sepet.x>340) sepet.x=340;
  baslamaX=e.touches[0].clientX;
});

// Ba≈ülamak veya a≈üama ba≈ülatmak i√ßin tƒ±klama
canvas.addEventListener("click",()=>{
  if(baslamaEkrani){
    baslamaEkrani=false;
    oyunAktif=true;
    if(!asamaBasladi){
      puan=0; kalp=3; hiz=2;
      document.getElementById("puan").innerText=puan;
      document.getElementById("kalp").innerText=kalp;
      document.getElementById("asama").innerText=asama;
      asamaBasladi=true;
      yeniSayi();
    }
  }
});
</script>
</body>
</html>
