<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SayÄ± Sepeti Oyunu</title>
<style>
  body { margin:0; overflow:hidden; font-family:sans-serif; }
  canvas { display:block; margin:auto; margin-top:20px; border:3px solid #ff9800; }
  #bilgi { text-align:center; font-size:18px; color:#333; }
  #yapan { font-size:16px; color:#555; margin-top:-10px; margin-bottom:10px; }
</style>
</head>
<body>

<div id="bilgi">
  <h2>ğŸ¯ SayÄ± Sepeti Oyunu</h2>
  <div id="yapan">Yapan: <strong>Mete ÃœLKER</strong></div>
  <p>AÅŸama: <span id="asama">1</span> | â¤ï¸ <span id="kalp">2</span> | Puan: <span id="puan">0</span></p>
</div>

<canvas id="oyun" width="400" height="500"></canvas>

<script>
const canvas = document.getElementById("oyun");
const ctx = canvas.getContext("2d");

let sepet = {x:180, y:420, w:60, h:30};
let puan=0, kalp=2, asama=1;
let hiz=2;
let oyunAktif=false;
let baslamaEkrani=true;
let asamaBasladi=false;

let sayilar = []; // Ekrandaki dÃ¼ÅŸen sayÄ±lar

const arkaPlanRenk="#87CEEB";
const toprakRenk="#8B4513";
const toprakY=450;

// Rastgele sayÄ± oluÅŸtur
function rastgeleSayi() {
  let deger, dogru;
  if(asama===1){ // DoÄŸal sayÄ±lar
    deger=Math.floor(Math.random()*10);
    dogru=true;
  } else if(asama===2){ // Tam sayÄ±lar
    deger=Math.floor(Math.random()*21)-10;
    dogru=true;
  } else { // Rasyonel sayÄ±lar
    deger=(Math.random()*4-2).toFixed(1);
    dogru=true;
  }
  return {x:Math.random()*350, y:-20, deger:deger, dogru:dogru};
}

// Ekrana sayÄ±lar ekle
function sayilariOlustur(){
  sayilar=[];
  let adet = Math.floor(Math.random()*4)+2; // 2-5 sayÄ±
  let pozisyonlar=[];
  for(let i=0;i<adet;i++){
    let yeniSayi;
    do{
      yeniSayi = rastgeleSayi();
    }while(pozisyonlar.some(p=>Math.abs(p-yeniSayi.x)<50));
    pozisyonlar.push(yeniSayi.x);
    sayilar.push(yeniSayi);
  }
  // 1 tane yanlÄ±ÅŸ/hasar veren sayÄ± ekle
  let idx = Math.floor(Math.random()*sayilar.length);
  sayilar[idx].dogru=false;
}

sayilariOlustur();

// Ã‡izim
function ciz(){
  ctx.fillStyle=arkaPlanRenk;
  ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle=toprakRenk;
  ctx.fillRect(0,toprakY,canvas.width,canvas.height-toprakY);

  if(baslamaEkrani){
    ctx.fillStyle="black";
    ctx.font="25px Arial";
    ctx.textAlign="center";
    if(!asamaBasladi) ctx.fillText("BaÅŸlamak iÃ§in tÄ±klayÄ±n", canvas.width/2, canvas.height/2);
    else {
      let asamaYazi = asama===1 ? "DoÄŸal SayÄ±lar" : asama===2 ? "Tam SayÄ±lar" : "Rasyonel SayÄ±lar";
      ctx.fillText("AÅŸama "+asama+": "+asamaYazi, canvas.width/2, canvas.height/2-20);
      ctx.fillText("BaÅŸlamak iÃ§in dokun", canvas.width/2, canvas.height/2+20);
    }
    return;
  }

  // Sepet
  ctx.fillStyle="#FF8C00";
  ctx.fillRect(sepet.x,sepet.y,sepet.w,sepet.h);
  ctx.fillStyle="#FFB74D"; // Tente
  ctx.fillRect(sepet.x-5,sepet.y-15,sepet.w+10,10);

  // SayÄ±lar
  ctx.font="30px Arial";
  ctx.fillStyle="#1565c0";
  sayilar.forEach(s=> ctx.fillText(s.deger,s.x,s.y));

  // Kalpler ve puan
  ctx.fillStyle="red";
  ctx.font="20px Arial";
  ctx.fillText("â¤ï¸ ".repeat(kalp), 10, 30);
  ctx.fillStyle="black";
  ctx.fillText("Puan: "+puan, 300, 30);

  if(kalp<=0){
    ctx.fillStyle="red";
    ctx.font="30px Arial";
    ctx.fillText("Oyun Bitti!",canvas.width/2,canvas.height/2);
    oyunAktif=false;
    baslamaEkrani=true;
    asamaBasladi=false;
  }
}

// GÃ¼ncelleme
function guncelle(){
  if(!oyunAktif) return;
  sayilar.forEach(s=>{
    s.y+=hiz;
    // Sepete deÄŸdi mi?
    if(s.y>sepet.y-20 && s.x>sepet.x-10 && s.x<sepet.x+sepet.w+10){
      if(s.dogru) puan+=10; else kalp--;
      sayilar = sayilar.filter(x=>x!==s);
    } 
    // Zemine deÄŸdi mi?
    else if(s.y>toprakY){
      if(s.dogru) puan-=10; else kalp--;
      sayilar = sayilar.filter(x=>x!==s);
    }
  });

  if(sayilar.length==0) sayilariOlustur();

  document.getElementById("puan").innerText=puan;
  document.getElementById("kalp").innerText=kalp;

  if(kalp<=0){ oyunAktif=false; baslamaEkrani=true; asamaBasladi=false; }

  if(puan>=100){
    asama++;
    if(asama>3){ oyunAktif=false; baslamaEkrani=true; asamaBasladi=false; }
    else{
      puan=0; kalp=2; hiz+=1;
      document.getElementById("asama").innerText=asama;
      baslamaEkrani=true;
      asamaBasladi=false;
    }
  }
}

// Oyun dÃ¶ngÃ¼sÃ¼
function dongu(){ guncelle(); ciz(); requestAnimationFrame(dongu); }
dongu();

// Klavye kontrolleri
window.addEventListener("keydown",(e)=>{
  if(!oyunAktif) return;
  if(e.key==="ArrowLeft") sepet.x-=20;
  if(e.key==="ArrowRight") sepet.x+=20;
  if(sepet.x<0) sepet.x=0;
  if(sepet.x>340) sepet.x=340;
});

// Dokunmatik kontroller
let baslamaX=null;
canvas.addEventListener("touchstart",(e)=>{
  if(!oyunAktif) return;
  baslamaX=e.touches[0].clientX;
});
canvas.addEventListener("touchmove",(e)=>{
  if(!oyunAktif) return;
  let hareket=e.touches[0].clientX-baslamaX;
  sepet.x+=hareket;
  if(sepet.x<0) sepet.x=0;
  if(sepet.x>340) sepet.x=340;
  baslamaX=e.touches[0].clientX;
});

// BaÅŸlama tÄ±klamasÄ±
canvas.addEventListener("click",()=>{
  if(baslamaEkrani){
    baslamaEkrani=false;
    oyunAktif=true;
    if(!asamaBasladi){
      puan=0; kalp=2; hiz=2;
      document.getElementById("puan").innerText=puan;
      document.getElementById("kalp").innerText=kalp;
      document.getElementById("asama").innerText=asama;
      asamaBasladi=true;
      sayilariOlustur();
    }
  }
});
</script>
</body>
</html>
